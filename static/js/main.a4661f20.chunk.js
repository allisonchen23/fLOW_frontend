(this["webpackJsonp-a"]=this["webpackJsonp-a"]||[]).push([[0],{17:function(e,t,a){e.exports=a.p+"static/media/flow_logo.2d7e1bda.svg"},25:function(e,t,a){},29:function(e,t,a){},31:function(e,t,a){e.exports=a.p+"static/media/dashboardimg.cfb6bfc4.svg"},32:function(e,t,a){e.exports=a.p+"static/media/drop.6b48d098.svg"},39:function(e,t,a){},41:function(e,t,a){e.exports=a.p+"static/media/downtrend.58f7c159.svg"},42:function(e,t,a){e.exports=a.p+"static/media/uptrend.1a723925.svg"},43:function(e,t,a){e.exports={graphContainer:"LineGraph_graphContainer__1GJUC","chartjs-render-monitor":"LineGraph_chartjs-render-monitor__1lZzI"}},47:function(e,t,a){e.exports=a.p+"static/media/Ac.836d2017.svg"},49:function(e,t,a){e.exports=a(83)},54:function(e,t,a){},55:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){e.exports=a.p+"static/media/waterimage.2fc0155a.jpg"},80:function(e,t,a){},83:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(23),s=a.n(l),o=(a(54),a(6)),c=a(7),i=a(9),d=a(8),u=a(10),m=a(4),b=(a(55),a(17)),g=a.n(b),h=a(25),p=a.n(h),f=(a(29),a(34)),v=a.n(f);v.a.initializeApp({apiKey:"AIzaSyBa97q4DWj7xsO4DWtFyEJQaSD4Cv-QcbA",authDomain:"testproj-81eb3.firebaseapp.com",databaseURL:"https://testproj-81eb3.firebaseio.com",projectId:"testproj-81eb3",storageBucket:"testproj-81eb3.appspot.com",messagingSenderId:"326625281759",appId:"1:326625281759:web:7dfdd060c65ab5ff604b6a",measurementId:"G-VS469K15HM"});var _,y=v.a,E=a(31),C=a.n(E),D=a(32),x=a.n(D),j=a(41),O=a.n(j),T=a(42),w=a.n(T),N=a(13),M=a(1),U=a(27),k=a.n(U),S=a(43),F=a.n(S);k.a.defaults.global.defaultFontFamily="'Open Sans', sans-serif",k.a.defaults.global.legend.display=!1;var W=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,l=new Array(n),s=0;s<n;s++)l[s]=arguments[s];return(a=Object(i.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(l)))).chartRef=r.a.createRef(),a.buildChart=function(){var e=a.chartRef.current.getContext("2d"),t=a.props,n=t.data,r=(t.average,t.labels);"undefined"!==typeof _&&_.destroy();var l=e.canvas.height,s=e.createLinearGradient(0,0,0,l);s.addColorStop(0,"rgb(151, 209, 244, .5)"),s.addColorStop(.5,"rgb(151, 209, 244, .1)"),s.addColorStop(1,"rgb(151, 209, 244, 0)"),_=new k.a(e,{type:"line",data:{labels:r,datasets:[{label:"Volume",data:n,fill:!0,borderColor:"#97D1F4",backgroundColor:s,pointBackgroundColor:"#97D1F4",pointRadius:3,hitRadius:30,pointStrokeColor:"#fff"}]},plugins:{zoom:{pan:{enabled:!0,mode:"xy",rangeMin:{x:null,y:null},rangeMax:{x:null,y:null},onPan:function(e){e.chart;console.log("I'm panning!!!")},onPanComplete:function(e){e.chart;console.log("I was panned!!!")}}}},options:{responsive:!0,maintainAspectRatio:!1,tooltips:{displayColors:!1},scales:{yAxes:[{scaleLabel:{display:!0,labelString:"Volume (L)",fontColor:"#666666"},ticks:{padding:10,fontColor:"#666666"},gridLines:{display:!1,borderDash:[8,4],color:"#666666",drawTicks:!1,drawBorder:!1}}],xAxes:[{scaleLabel:{display:!0,labelString:"Day of Week",fontColor:"#666666"},gridLines:{borderDash:[8,4],color:"#eeeeee",drawTicks:!1,drawBorder:!1},ticks:{padding:10,fontColor:"#666666"}}]}}})},a}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.buildChart()}},{key:"componentDidUpdate",value:function(){this.buildChart()}},{key:"render",value:function(){return r.a.createElement("div",{className:F.a.graphContainer},r.a.createElement("canvas",{id:"myChart",ref:this.chartRef}))}}]),t}(n.Component);N.b.add(M.d,M.g,M.b,M.e,M.f,M.i);var A=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getMsg",value:function(){return["Howdy!","Welcome to fLOW!","Save Water!"][Math.floor(Math.random()*Math.floor(3))]}},{key:"render",value:function(){return r.a.createElement("h2",null,this.getMsg())}}]),t}(n.Component),L=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],I=["Jan.","Feb.","Mar.","Apr.","May","Jun.","Jul.","Aug.","Sep.","Oct.","Nov.","Dec."],J=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).filteredData=function(t,a){var n=[],r=[],l=L,s=0,o=new Date(t),c=o.getTime(),i=new Date;i.setUTCFullYear(t.getUTCFullYear()),i.setUTCMonth(t.getUTCMonth()),i.setUTCDate(t.getDate()+6),i.setUTCHours(12),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0);for(var d=i.getTime();c<=d;)r[s]=l[o.getDay()]+", "+I[o.getMonth()]+" "+o.getDate(),n[s]=c in a?a[c].toFixed(2):0,s++,o.setDate(o.getUTCDate()+1),o.setUTCHours(12,0,0),c=o.getTime();e.setState({filteredData:n,labels:r})},e.getWeeklyWaterUsage=function(t,a,n){var r=new Date;r.setUTCFullYear(t.getUTCFullYear()),r.setUTCMonth(t.getUTCMonth()),r.setUTCDate(t.getUTCDate()-7),r.setUTCHours(12),r.setUTCMinutes(0),r.setUTCSeconds(0),r.setUTCMilliseconds(0);for(var l=0,s=t.getTime(),o=a.getTime();s<=o;)s in n&&(l+=n[s]),t.setDate(t.getUTCDate()+1),s=t.getTime();l=l.toFixed(2),e.setState({weekly_usage:l}),a.setDate(r.getUTCDate()+6),s=r.getTime(),o=a.getTime();for(var c=0;s<=o;)s in n&&(c+=n[s]),r.setDate(r.getUTCDate()+1),s=r.getTime();var i=l/c*100;i=i.toFixed(2),e.setState({perc_difference:i})},e.componentDidMount=function(){var t=new Date(0),a=y.database().ref("water_data"),n={};a.on("value",(function(a){var r,l,s,o,c;n={},a.forEach((function(e){r=1e3*e.key,l=e.child("volume").val(),l,(s=new Date).setTime(r),(o=new Date).setUTCFullYear(s.getUTCFullYear()),o.setUTCMonth(s.getUTCMonth()),o.setUTCDate(s.getUTCDate()),o.setUTCHours(12),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0),o>t&&(t=o),(c=o.getTime())in n?n[c]+=l:n[c]=l}));var i=new Date;i.setUTCFullYear(t.getUTCFullYear()),i.setUTCMonth(t.getUTCMonth()),i.setUTCDate(t.getUTCDate()-6),i.setUTCHours(12),i.setUTCMinutes(0),i.setUTCSeconds(0),i.setUTCMilliseconds(0),e.filteredData(i,n),e.getWeeklyWaterUsage(i,t,n)}))},e.state={daily_sums:{},filteredData:[],labels:[],weekly_usage:0,perc_difference:0,sign:[]},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e,t=this.state,a=t.filteredData,n=t.labels;return this.state.perc_difference>0?(e=r.a.createElement("img",{className:"dropimg",src:w.a}),this.sign=r.a.createElement("b",null,"+")):(e=r.a.createElement("img",{className:"dropimg",src:O.a}),this.sign=r.a.createElement("b",null,"-")),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body_wrap"},r.a.createElement("div",{className:"body_container"},r.a.createElement("div",{className:"body_box long",id:"message_box"},r.a.createElement("div",{className:"box_content"},r.a.createElement(A,null),r.a.createElement("img",{className:"dbimg",src:C.a}))),r.a.createElement("div",{className:"body_box regular"},r.a.createElement("div",{className:"box_content stat_box"},r.a.createElement("img",{className:"dropimg",src:x.a}),r.a.createElement("div",{className:"data_text"},r.a.createElement("b",null,this.state.weekly_usage," ",r.a.createElement("div",{id:"gal"},"liters.")),r.a.createElement("p",{className:"data_text_bot"},"Water Used This Week")))),r.a.createElement("div",{className:"body_box regular"},r.a.createElement("div",{className:"box_content stat_box"},e,r.a.createElement("div",{className:"data_text"},r.a.createElement("b",null,this.sign,this.state.perc_difference,r.a.createElement("div",{id:"gal"},"%")),r.a.createElement("p",{className:"data_text_bot"},"From Last Week")))),r.a.createElement("div",{className:"body_box full_width double_height"},r.a.createElement("div",{id:"graph_wrap"},r.a.createElement("div",{id:"graph_htmlcontainer"},r.a.createElement("div",{className:p.a.container},r.a.createElement("header",null,r.a.createElement("h2",null,"Your Usage History")),r.a.createElement(W,{data:a,labels:n})))))))))}}]),t}(n.Component),H=(a(75),a(76),a(19));N.b.add(M.d,M.g,M.b,M.e,M.f,M.i,M.c,M.h,M.k);var R=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getMsg",value:function(){return["Each person uses about 80-100 gallons of water per day.","Plastic bottles take ~3 times as much water to produce than they can actually hold.","What can you do to save our planet?"][Math.floor(Math.random()*Math.floor(3))]}},{key:"render",value:function(){return r.a.createElement("h3",{className:"box_text blue_box_text"},this.getMsg())}}]),t}(n.Component),Y=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getMsg",value:function(){return["Showering, bathing and using the toilet account for about two-thirds of the average family\u2019s water usage.","A dripping faucet can lead to over 300 liters of water waste a month. That\u2019s around 10 liters a day!","In Los Angeles, around 54% of a single family\u2019s water usage comes from landscaping and outdoor use."][Math.floor(Math.random()*Math.floor(3))]}},{key:"render",value:function(){return r.a.createElement("h3",{className:"box_text blue_box_text"},this.getMsg())}}]),t}(n.Component),B=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"getMsg",value:function(){return["Cutting 4 minutes from your shower can save 30 gallons of water.","Cutting 4 minutes from your shower can save 30 gallons of water.","Cutting 4 minutes from your shower can save 30 gallons of water."][Math.floor(Math.random()*Math.floor(3))]}},{key:"render",value:function(){return r.a.createElement("h2",{className:"box_text white_box_text"},this.getMsg())}}]),t}(n.Component);console.log(g.a);var G=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body_wrap"},r.a.createElement("div",{className:"body_container"},r.a.createElement("div",{className:"body_box_t long2_t triple_height_t"},r.a.createElement("div",{className:"box_content_t",id:"first_image"})),r.a.createElement("div",{className:"body_box_t long2_t triple_height_t",id:"message_box_t"},r.a.createElement("div",{className:"box_content_t"},r.a.createElement(R,null),r.a.createElement(H.a,{icon:"water",className:"water_icon"}))),r.a.createElement("div",{className:"body_box_t full_width_t double_height_t",id:"message_box3_t"},r.a.createElement("div",{className:"box_content_t"},r.a.createElement(H.a,{icon:"lightbulb",className:"lightbulb_icon"}),r.a.createElement(B,null))),r.a.createElement("div",{className:"body_box_t long3_t triple_height_t",id:"message_box5_t"},r.a.createElement("div",{className:"box_content_t icon_box"},r.a.createElement(H.a,{icon:"tint",className:"fact_icon"}),r.a.createElement(Y,null))),r.a.createElement("div",{className:"body_box_t triple_height_t",id:"second_image"},r.a.createElement("div",{className:"box_content_t"},r.a.createElement("h2",{className:"box_text white_box_text"})))))))}}]),t}(n.Component),q=a(35),P=a.n(q),z=a(44),V=a(48),K=(a(80),["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]),Q=["January","February","March","April","May","June","July","August","September","October","November","December"],X=function(e){function t(){var e;return Object(o.a)(this,t),(e=Object(i.a)(this,Object(d.a)(t).call(this))).onSelectChange=function(t){var a="";console.log(t);for(var n=0;n<t.length;n++)a+=t[n].value,n<t.length-1&&(a+="_");e.setState({selectedDevices:a})},e.submitButton=function(){var t=e.state.selectedDevices;e.getData(t)},e.parseDevicesSelected=function(){return e.state.selectedDevices.replace("_",", ")},e.state={filteredData:[],labels:[],startDate:0,endDate:0,selectOptions:[],selectedDevices:""},e}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.getAvailableUserIDs()}},{key:"getAvailableUserIDs",value:function(){var e=Object(z.a)(P.a.mark((function e(){var t,a=this;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(t=new XMLHttpRequest).addEventListener("load",(function(){var e=JSON.parse(t.responseText),n=[],r=!0,l=!1,s=void 0;try{for(var o,c=e[Symbol.iterator]();!(r=(o=c.next()).done);r=!0){var i=o.value;n.push({label:"Device ".concat(i),value:i})}}catch(d){l=!0,s=d}finally{try{r||null==c.return||c.return()}finally{if(l)throw s}}a.setState({selectOptions:n})})),t.open("GET","http://129.146.137.152:3000/available_user_ids"),t.send();case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getData",value:function(e){var t=this;if(e){var a=new XMLHttpRequest;a.addEventListener("load",(function(){var e,n,r=JSON.parse(a.responseText);console.log(r);var l=Object.keys(r),s=new Date(1e3*parseInt(l[0],10)),o=s.getDay(),c=K[s.getDay()]+", "+Q[s.getMonth()]+" "+s.getDate(),i=new Date(1e3*parseInt(l[l.length-1],10)),d=K[i.getDay()]+", "+Q[i.getMonth()]+" "+i.getDate();n=K.slice(o,o+7),e=Object.values(r),console.log("labels: "+n),console.log("startDate: "+c),console.log("endDate: "+d),t.setState({filteredData:e,labels:n,startDate:c,endDate:d})})),a.open("GET","http://129.146.137.152:3000/dailysum/".concat(e)),a.send()}else alert("Please select at least 1 device to view data.")}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"body"},r.a.createElement("div",{className:"body_wrap"},r.a.createElement("div",{className:"body_container flex_container"},r.a.createElement("div",null,r.a.createElement("p",null,"Please select the devices you would like to view data for.")),r.a.createElement("div",{className:"body_box select_menu ",id:"message_box"},r.a.createElement(V.a,{isMulti:!0,onChange:this.onSelectChange,options:this.state.selectOptions}),r.a.createElement("button",{className:"button",onClick:this.submitButton},"Reload Graph")),r.a.createElement("div",{id:"graph_wrap"},r.a.createElement("div",{id:"graph_htmlcontainer"},r.a.createElement("div",{className:p.a.container},r.a.createElement("header",null,r.a.createElement("h2",null,"Your Usage History")),r.a.createElement(W,{data:this.state.filteredData,labels:this.state.labels})))),r.a.createElement("div",null,r.a.createElement("p",null,"Start Date: ",this.state.startDate),r.a.createElement("p",null,"End Date: ",this.state.endDate),r.a.createElement("p",null,"Devices included (ID): ",this.parseDevicesSelected()))))))}}]),t}(n.Component),Z=a(18);a(39);N.b.add(M.d,M.g,M.b,M.e,M.f,M.i,M.j),console.log(g.a);var $=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"nav_wrap"},r.a.createElement("div",{className:"logo_wrap"},r.a.createElement("a",{href:"#top"},r.a.createElement("img",{src:g.a}))),r.a.createElement("nav",null,r.a.createElement("ul",{className:"nav_list"},r.a.createElement("li",{className:"nav_item"},r.a.createElement(Z.b,{className:"nav_square",to:"/pages/home.js"},r.a.createElement(H.a,{icon:"home",className:"nav_icon"}))),r.a.createElement("li",{className:"nav_item"},r.a.createElement(Z.b,{className:"nav_square",to:"/pages/tips.js"},r.a.createElement(H.a,{icon:"lightbulb",className:"nav_icon"}))),r.a.createElement("li",{className:"nav_item"},r.a.createElement(Z.b,{className:"nav_square",to:"/pages/about.js"},r.a.createElement(H.a,{icon:"users",className:"nav_icon"})))))))}}]),t}(n.Component),ee=a(47),te=a.n(ee);N.b.add(M.d,M.g,M.b,M.e,M.f,M.i,M.a),console.log(g.a);var ae=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("nav",{className:"top_bar"},r.a.createElement("ul",{className:"top_list"},r.a.createElement("li",{id:"name"},"Allison Chen"),r.a.createElement("li",{className:"top_item"},r.a.createElement("img",{src:te.a,alt:""})),r.a.createElement("li",{className:"top_item"},r.a.createElement(Z.b,{to:"/"},r.a.createElement(H.a,{icon:"bell",className:"top_iconsa"}))))))}}]),t}(n.Component);N.b.add(M.d,M.g,M.b,M.e,M.f,M.i),console.log(g.a);var ne=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Z.a,{name:"app",path:"/",handler:t,basename:"/fLOW_frontend"},r.a.createElement($,null),r.a.createElement(ae,null),r.a.createElement(m.d,null,r.a.createElement(m.b,{path:"/pages/home.js",exact:!0,component:J}),r.a.createElement(m.b,{path:"/pages/tips.js",exact:!0,component:G}),r.a.createElement(m.b,{path:"/pages/about.js",exact:!0,component:X})),r.a.createElement(m.a,{from:"/",exact:!0,to:"/pages/home.js"})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(ne,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[49,1,2]]]);
//# sourceMappingURL=main.a4661f20.chunk.js.map